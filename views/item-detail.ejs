<!DOCTYPE html>
<html lang="en">
<%- include('./partials/head.ejs') %>
<body>
    <%- include('./partials/nav.ejs') %>

    <div class="container">
        <h4>Item detail</h4>
        <div>
            <h5>Item name: <%= item.name %></h5>
            <h5>Item price: <%= item.price %></h5>
        </div>
        <a href="" class="delete btn" id="deleteBtn" data-id="<%= item._id %>">Delete</a>
    </div>

    <script>
        deleteBtn.onclick = function(e) {
            e.preventDefault();
            const id = e.target.getAttribute('data-id');
            const endpoint = `/items/${id}`;

            fetch(endpoint, {
                method: 'DELETE',
            }).then(res => res.json())
              .then(data => {
                window.location.href = data.redirect_link
            }).catch(err => console.log(err))
        }
    </script>
</body>
</html>